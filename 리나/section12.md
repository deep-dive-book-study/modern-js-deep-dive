## 함수

- 재료를 투입 받아 제품을 생산하는 기계
- 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것
- `매개변수` : 함수 내부로 입력을 전달 받는 변수
- `인수` : 입력
- `반환 값` : 출력
- 함수는 일급 객체
  - 함수를 값처럼 자유롭게 사용 가능

```javascript
// 함수 선언
function add(x, y) {
  return x + y;
}

// 함수 호출
add(2, 5);

// x, y : 매개변수
// x + y : 반환 값
// 2, 5 : 인수
```

---

### 함수 사용 이유

- 실행 시점을 개발자가 결정할 수 있고 몇 번이든 재사용 가능
- 코드의 중복을 억제하고 재사용성을 높이는 함수는 유지보수의 편의성을 높이고, 실수를 줄여 코드의 신뢰성을 높이는 효과가 있음
- 적절한 함수 이름은 함수의 내부 코드를 이해하지 않고도 함수의 역할을 이해할 수 있게 돕는데 이는 코드의 가독성을 향상시킴

---

### 함수 정의

- 함수 선언문
  ```javascript
  function add(x, y) {
    return x + y;
  }
  ```
- 함수 표현식(함수 리터럴)
  ```javascript
  var add = function (x, y) {
    return x + y;
  };
  ```
- `Function` 생성자 함수
  - 렉시컬 스코프 참조 X, 전역 스코프만을 렉시컬 환경으로 가짐 ⇒ 생성자 함수 특징
  ```javascript
  var add = new Function("x", "y", "return x + y");
  ```
- 화살표 함수
  ```javascript
  var add = (x, y) => x + y;
  ```

---

### 함수 선언문과 함수 표현식은 어떤 차이가 있는가?

- 함수 선언문
  - 표현식이 아닌 문
  - 함수 선언 이전에 호출해도 함수 호이스팅에 의해 호출 가능
  - 자바스크립트 엔진은 생성된 함수를 호출하기 위해 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성하고, 거기에 함수 객체를 할당
  - 함수는 함수 이름으로 호출하는 것이 아니라 함수 객체를 가리키는 식별자로 호출
  - 동작 과정
    - 자바스크립트 엔진은 코드를 처음 훑을 때 변수 선언보다 우선적으로 함수 선언문을 발견
    - 함수 이름과 동일한 식별자(변수) 생성
    - 이 식별자에 함수 정의를 통해 생성된 함수 객체를 즉시 할당
    - 함수 전체가 호이스팅됨
  ```javascript
  function add(x, y) {
    return x + y;
  }

  // 동작 방식
  var add = function add(x, y) {
    return x + y;
  };
  ```
- 함수 표현식
  - 표현식인 문
  - 함수 선언 이전에 호출할 시 `undefined` 반환 (`var` 키워드로 선언할 시만)
    - 변수만 호이스팅되고, 함수 표현식은 런타임에 값을 할당하기 때문
  - 초기화 단계에서 변수 선언만 처리되고 객체는 할당 X
  - 코드가 실행되는 런타임에 함수 객체가 생성되고 변수에 할당
  - 변수 선언만 호이스팅됨
  ```javascript
  const sub = function (x, y) {
    return x - y;
  };
  ```

---

### 다양한 함수의 형태

- 즉시 실행 함수

  - 함수 정의와 동시에 즉시 호출되는 함수
  - 익명 함수를 사용하는 것이 일반적이지만 기명 함수도 사용 가능
    - but, 즉시 실행 함수를 다시 호출할 수는 없음
  - 단 한 번만 호출되며, 다시 호출 불가
  - `그룹 연산자()`로 감싸야 함
    - 함수 리터럴을 평가해서 함수 객체를 생성하기 위함

  ```javascript
  // 익명 즉시 실행 함수
  (function () {
    var a = 3;
    var b = 5;
    return a * b;
  })();

  // 기명 즉시 실행 함수
  (function foo() {
    var a = 1;
    var b = 5;
    return a * b;
  })();

  foo(); // ReferenceError : foo is not defined

  // () 그룹 연산자 내의 기명 함수는 함수 선언문이 아니라 함수 리터럴로 평가
  // 함수 이름은 몸체에서만 참조할 수 있는 식별자이므로 즉시 실행 함수 다시 호출 불가
  ```

- 재귀 함수
  - 자기 자신을 호출하는 행위
  - 재귀 함수는 자신을 무한 호출하기 때문에 탈출 조건을 반드시 만들어야 함
  ```javascript
  function factorial(n) {
    if (n <= 1) return 1;
    return n * factorial(n - 1);
  }
  console.log(factorial(0)); // 0! = 1
  console.log(factorial(1)); // 1! = 1
  console.log(factorial(2)); // 2! = 2
  console.log(factorial(3)); // 3! = 6
  console.log(factorial(4)); // 4! = 24
  ```
- 중첩 함수

  - 함수 내부에 정의된 함수
  - 외부 함수 내부에서만 호출 가능

  ```javascript
  function outer() {
    var x = 1;

    // 중첩 함수
    function inner() {
      var y = 2;
      console.log(x + y); // 3
    }
    inner();
  }
  outer();
  ```

- 콜백 함수
  - 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수
  - 변수를 통해 함수의 외부에서 콜백 함수를 전달 받은 함수 -> 고차 함수
  - 콜백 함수는 고차 함수에 의해 호출되며 이때 고차 함수는 필요에 따라 콜백 함수에 인수 전달 가능
  ```javascript
  repeat(5, function (i) {
    if (i % 2) console.log(i);
  }); // 1 3
  ```
- 순수 함수와 비순수 함수
  - 순수 함수
    - 어떤 외부 상태에 의존하지도 않고 변경하지도 않는 함수
  - 비순수 함수
    - 외부 상태에 의존하거나 외부 상태를 변경하는 함수
